<html>

<head>
    <title>JQuery.RecurrenceInput Demo</title>

    <link type="text/css" href="jquery.tools.dateinput.css" rel="stylesheet"></link>
    <link type="text/css" href="jquery.recurrenceinput.css" rel="stylesheet"></link>
    <link type="text/css" href="overlays.css" rel="stylesheet"></link>

    <script type="text/javascript" src="../lib/jquery-1.4.2.js"></script>
    <script type="text/javascript" src="../lib/jquery.tmpl-beta1.js"></script>
    <script type="text/javascript" src="../lib/jquery.tools.dateinput-1.2.5.js"></script>
    <script type="text/javascript" src="../lib/jquery.tools.overlay-1.2.5.js"></script>
    <script type="text/javascript" src="../lib/jquery.tools.toolbox.expose-1.2.5.js"></script>
    <script type="text/javascript" src="../src/jquery.recurrenceinput.js"></script>

    <script id="jquery-recurrenceinput-display-tmpl" type="text/x-jquery-tmpl">
        <div class="${klass.display}">
            <input type="checkbox" name="${field.display_name}" />
            {{if field.display_text}}
            <label>${i18n.display_label_activate}</label>
            {{else}}
            <span class="${klass.display_text}">
                ${field.display_text}
            </span>
            <label>${i18n.display_label_unactivate}</label>
            {{/if}}
        </div>
    </script>

    <script id="jquery-recurrenceinput-form-tmpl" type="text/x-jquery-tmpl">
        <div class="${klass.form}">
            <form>

                <ul class="${klass.freq}">
                    <li>
                        <input type="radio"
                               ref=".${klass.freq_daily}"
                               name="${field.freq_name}"
                               value="${field.freq_daily_value}" />
                        <label>${i18n.freq_daily}</label>
                    </li>
                    <li>
                        <input type="radio"
                               ref=".${klass.freq_weekly}"
                               name="${field.freq_name}"
                               value="${field.freq_weekly_value}" />
                        <label>${i18n.freq_weekly}</label>
                    </li>
                    <li>
                        <input type="radio"
                               ref=".${klass.freq_monthly}"
                               name="${field.freq_name}"
                               value="${field.freq_monthly_value}" />
                        <label>${i18n.freq_monthly}</label>
                    </li>
                    <li>
                        <input type="radio"
                               ref=".${klass.freq_yearly}"
                               name="${field.freq_name}"
                               value="${field.freq_yearly_value}" />
                        <label>${i18n.freq_yearly}</label>
                    </li>
                </ul>

                <div class="${klass.freq_options}">

                    <div class="${klass.freq_daily}">
                        <span>${i18n.daily_interval}<span>
                        <input type="text" size="2"
                            value="${field.daily_interval_value}"
                            name="${field.daily_interval_name}"/>
                    </div>

                    <div class="${klass.freq_weekly}">
                        <span>${i18n.weekly_interval}<span>
                        <input type="text" size="2"
                            value="${field.weekly_interval_value}"
                            name="${field.weekly_interval_name}" />
                        <ul>
                        {{each i18n.weekdays}}
                            <li>
                                <input type="checkbox"
                                       name="${field.weekly_weekdays_name}_${weekdays[$index]}"
                                       value="${weekdays[$index]}" />
                                <label>${$value}</label>
                            </li>
                        {{/each}}
                        </ul>
                    </div>

                    <div class="${klass.freq_monthly}">
                        <ul>
                            <li>
                                <input
                                    type="radio"
                                    value="${field.monthly_day_of_month_value}"
                                    name="${field.monthly_type_name}" />
                                <span>${i18n.monthly_day_of_month}</span>
                                <select name="${field.monthly_day_of_month_day_name}">
                                {{each [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,
                                        18,19,20,21,22,23,24,25,26,27,28,29,30,31]}}
                                    <option value="${$value}">${$value}</option>
                                {{/each}}
                                </select>
                                <input type="text" size="2"
                                    value="${field.monthly_day_of_month_interval_value}" 
                                    name="${field.monthly_day_of_month_interval_name}"/>
                            </li>
                            <li>
                                <input
                                    type="radio"
                                    value="${field.monthly_weekday_of_month_value}"
                                    name="${field.monthly_type_name}" />
                                <span>${i18n.monthly_weekday_of_month}</span>
                                <!-- TODO: could it be multiselect? -->
                                <select name="${field.monthly_weekday_of_month_index_name}">
                                {{each i18n.order_indexes}}
                                    <option value="${order_indexes[$index]}">${$value}</option>
                                {{/each}}
                                </select>
                                <select name="${field.monthly_weekday_of_month_name}">
                                {{each i18n.weekdays}}
                                    <option value="${weekdays[$index]}">${$value}</option>
                                {{/each}}
                                    <option value="${field.yearly_weekday_of_month_weekday_value}">
                                        ${i18n.yearly_weekday_of_month_weekday}</option>
                                    <option value="${field.yearly_weekday_of_month_weekend_day_value}">
                                        ${i18n.yearly_weekday_of_month_weekend_day}</option>
                                </select>
                                </select>
                                <input type="text" size="2"
                                    value="${field.monthly_weekday_of_month_interval_value}"
                                    name="${field.monthly_weekday_of_month_interval_name}" />
                            </li>
                        </ul>
                    </div>

                    <div class="${klass.freq_yearly}">
                        <ul>
                            <li>
                                <input
                                    type="radio"
                                    value="${field.yearly_day_of_month_value}"
                                    name="${field.yearly_type_name}" />
                                <span>${i18n.yearly_day_of_month}</span>
                                <select name="${field.yearly_day_of_month_name}">
                                {{each months}}
                                    <option value="${$index+1}">${$value}</option>
                                {{/each}}
                                </select>
                                <select name="${field.yearly_day_of_month_index_name}">
                                {{each [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,
                                        18,19,20,21,22,23,24,25,26,27,28,29,30,31]}}
                                    <option value="${$value}">${$value}</option>
                                {{/each}}
                                </select>
                            </li>
                            <li>
                                <input
                                    type="radio"
                                    value="${field.yearly_weekday_of_month_value}"
                                    name="${field.yearly_type_name}" />
                                <span>${i18n.yearly_weekday_of_month}</span>
                                <select name="${field.yearly_weekday_of_month_index_name}">
                                {{each i18n.order_indexes}}
                                    <option value="${order_indexes[$index]}">${$value}</option>
                                {{/each}}
                                </select>
                                <select name="${field.yearly_weekday_of_month_name}">
                                {{each i18n.weekdays}}
                                    <option value="${weekdays[$index]}">${$value}</option>
                                {{/each}}
                                    <option value="${field.yearly_weekday_of_month_weekday_value}">
                                        ${i18n.yearly_weekday_of_month_weekday}</option>
                                    <option value="${field.yearly_weekday_of_month_weekend_day_value}">
                                        ${i18n.yearly_weekday_of_month_weekend_day}</option>
                                </select>
                                <select name="${field.yearly_weekday_of_month_month_name}">
                                {{each months}}
                                    <option value="${$index+1}">${$value}</option>
                                {{/each}}
                                </select>
                            </li>
                        </ul>
                    </div>

                </div>

                <div class="${klass.clear}"><!-- --></div>

                <div class="${klass.range}">
                    <label>${i18n.range_label}</label>
                    <ul>
                        <li>
                            <input
                                type="radio"
                                value="${field.range_no_end}"
                                name="${field.range_type}" />
                            <div>${i18n.range_no_end_label}</div>
                        </li>
                        <li>
                            <input
                                type="radio"
                                value="${field.range_by_ocurrences}"
                                name="${field.range_type}" />
                            <div>
                                <span>${i18n.range_by_occurences_label}</span>
                                <input
                                    type="text" size="3"
                                    value="${field.range_by_ocurrences_value}"
                                    name="{field.range_type" />
                            </div>
                        </li>
                        <li>
                            <input
                                type="radio"
                                value="${field.range_by_end_date}"
                                name="${field.range_type}" />
                            <div>
                                <span>${i18n.range_by_end_date}</span>
                                {{tmpl({day_name: field.range_by_end_date_day_name,
                                        day_value: field.range_by_end_date_day_value,
                                        month_name: field.range_by_end_date_month_name,
                                        month_value: field.range_by_end_date_month_value,
                                        year_name: field.range_by_end_date_year_name,
                                        year_value: field.range_by_end_date_year_value,
                                        calendar_name: field.range_by_end_date_calendar_name,
                                        months: i18n.months}) template.dateinput}}
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="${klass.clear}"><!-- --></div>

                <div class="${klass.buttons}">
                    <input
                        type="submit"
                        class="${klass.cancel_button}"
                        value="${i18n.cancel_button_label}" />
                    <input
                        type="submit"
                        class="${klass.save_button}"
                        value="${i18n.save_button_label}" />
                </div>
            </form>
        </div>
    </script>

    <script id="collective-z3cform-dateinput-tmpl" type="text/x-jquery-tmpl">
        <input type="text" name="${day_name}" size="2" maxlength="2" value="${day_value}"/> /
        <select name="${month_name}">
        {{each months}}
            <option value="${$index+1}"
                {{if $index+1==month_value}}selected="selected"{{/if}}>${$value}</option>
        {{/each}}
        </select> /
        <input type="text" name="${year_name}" size="4" maxlength="4" value="${year_value}"/>
        <input type="hidden" name="${calendar_name}" />
    </script>


</head>

<body>

    <form action="." method="get">

        <div class="field">
            <div class="fieldname_start">
                <label>Start:</label>
                <span class="time"> - 
                    <input type="input" name="fieldname_start_hour" value="10" size="1" /> :
                    <input type="input" name="fieldname_start_min" value="15" size="1" />
                </span>
            </div>
            <div class="fieldname_end">
                <label>End:</label>
                <span class="time"> - 
                    <input type="input" name="fieldname_end_hour" value="21" size="1" /> :
                    <input type="input" name="fieldname_end_min" value="20" size="1" />
                </span>
            </div>
            <script type="text/javascript">
                var start = new Date();
                var end = new Date(start.getFullYear(), start.getMonth(), start.getDate()+10);
                var months = [
                    'Januar', 'Februar', 'March', 'April', 'May', 'June',
                    'July', 'August', 'September', 'October', 'November', 'December'];

                $('div.fieldname_start > label').after(
                    $('#collective-z3cform-dateinput-tmpl').tmpl({
                    day_name: 'start_day', month_name: 'start_month', year_name: 'start_year',
                    day_value: start.getDate(), month_value: start.getMonth(), year_value: start.getFullYear(),
                    months: months}));

                $('div.fieldname_end > label').after(
                    $('#collective-z3cform-dateinput-tmpl').tmpl({
                    day_name: 'end_day', month_name: 'end_month', year_name: 'end_year',
                    day_value: end.getDate(), month_value: end.getMonth(), year_value: end.getFullYear(),
                    months: months}));
            </script>
            <div class="fieldname_all_day">
                <input type="checkbox" name="all_day" />
                <label>All Day</label>
            </div>
            <script type="text/javascript">
                $('div.fieldname_all_day > label').click(function() {
                    var input = $(this).parent().find('input');
                    input.click(); input.change();
                });
                $('input[name=all_day]').change(function(e) {
                    if ($(this).is(':checked')) { $('span.time').hide(); }
                    else { $('span.time').show(); }
                });
            </script>
        </div>

        <div class="field fieldname_repeat">
            <textarea name="repeat"></textarea>
            <script type="text/javascript">
                $("textarea[name=repeat]").recurrenceinput();
            </script>
        </div>

        <div class="buttons">
            <input type="submit" name="" value="Submit" />
        </div>

    </form>

</body>

</html>

